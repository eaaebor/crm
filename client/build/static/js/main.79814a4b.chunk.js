(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,a){e.exports=a(38)},25:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),c=a.n(s),l=(a(25),a(3)),o=a(4),u=a(6),i=a(5),m=a(9),d=a(8),p=a(1),h=a.n(p),f=a(2),E=a(33),g=function(){function e(t){Object(l.a)(this,e),this.auth_api_url=t}return Object(o.a)(e,[{key:"login",value:function(){var e=Object(f.a)(h.a.mark((function e(t,a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.auth_api_url,{method:"POST",body:JSON.stringify({username:t,password:a})});case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,![401,404].includes(parseInt(n.status))){e.next=8;break}throw Error(r.msg);case 8:return this.setToken(r.msg.token),this.setUsername(t),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loggedIn",value:function(){var e=this.getToken();return e&&1e3*E(e).exp<=Date.now()&&(this.logout(),window.location.href="/"),null!==this.getToken()}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"setUsername",value:function(e){localStorage.setItem("username",e)}},{key:"getUsername",value:function(){return localStorage.getItem("username")}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token"),localStorage.removeItem("username")}},{key:"fetch",value:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var a={Accept:"application/json","Content-Type":"application/json"};return this.loggedIn()&&(a.Authorization="Bearer "+this.getToken()),fetch(e,Object(d.a)({headers:a},t))}))}]),e}(),v=r.a.createContext(),b=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).API_URL="/api",n.Auth=new g("".concat(n.API_URL,"/user/authenticate")),n.state={users:[],user:[],updates:[],loggedInUser:{status:{text:"loading",class:"loading"}}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(v.Provider,{value:{state:this.state,login:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.Auth.login(a,n);case 3:e.setState({isLoggedIn:!0}),window.location.href="/",t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}(),logOut:function(){e.Auth.logout(),e.setState({isLoggedIn:!1}),window.location.href="/"},getUsers:function(){var t=Object(f.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/user/all-users"));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.setState({users:n});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),updateUser:function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/user/edit-user"),{method:"PUT",mode:"cors",body:JSON.stringify({object:a,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateFullUser:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/user/edit-full-user"),{method:"PUT",mode:"cors",body:JSON.stringify({object:a,username:n,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),getUpdates:function(){var t=Object(f.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/user/all-updates"));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.setState({updates:n.reverse()});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getUser:function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.state.users.find((function(e){return e.username===a}));case 2:n=t.sent,e.setState({user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getLoggedInUser:function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===a){t.next=7;break}return t.next=3,e.state.users.find((function(e){return e.username===a}));case 3:n=t.sent,e.setState({loggedInUser:n}),e.setState({isLoggedIn:!0}),localStorage.setItem("userid",e.state.loggedInUser._id);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateUserStatus:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/user/update-status"),{method:"PUT",mode:"cors",body:JSON.stringify({text:a,style:n,username:e.state.loggedInUser.username,fullname:e.state.loggedInUser.fullname,date:Date.now(),id:e.state.loggedInUser._id})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),newUser:function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/user/new-user"),{method:"POST",mode:"cors",body:JSON.stringify({user:a,id:e.state.loggedInUser._id})});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),teamMember:function(t,a){var n=e.state.users.find((function(e){return e._id===t}));if(void 0!==n)return r.a.createElement("div",{className:"teamMember"},r.a.createElement("span",{style:{float:"right",cursor:"pointer"},onClick:function(){return e.removeFromTeam(n._id,a)}},"x"),r.a.createElement("div",{className:"teamMemberImgContainer"},r.a.createElement("img",{className:"teamMemberImg",src:n.imageurl,alt:""})),r.a.createElement("div",{className:"teamMemberName"},n.fullname),r.a.createElement("div",{className:"teamMemberTitle"},n.title))}}},this.props.children)}}]),a}(n.Component),y=a(7),N=a(18),C=r.a.createContext(),k=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).API_URL="/api",n.Auth=new g("".concat(n.API_URL,"/user/authenticate")),n.state={customers:[],customer:{comments:[]}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(C.Provider,{value:{state:this.state,getCustomers:function(){var t=Object(f.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/customer/all-customers"));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.setState({customers:n});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getCustomer:function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.state.customers.find((function(e){return e._id===a}));case 2:(n=t.sent).comments.reverse(),e.setState({customer:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),newCustomer:function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=0,r=Object.entries(a);n<r.length;n++)s=Object(N.a)(r[n],2),c=s[0],void 0===s[1]&&(a=Object(d.a)(Object(d.a)({},a),{},Object(y.a)({},c,"Ikke opgivet")));return t.next=3,e.Auth.fetch("".concat(e.API_URL,"/customer/new-customer"),{method:"POST",mode:"cors",body:JSON.stringify({customer:a,byuser:localStorage.getItem("userid"),date:Date.now()})});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateCustomer:function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/customer/edit-customer"),{method:"PUT",mode:"cors",body:JSON.stringify({object:a,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateFullCustomer:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/customer/edit-full-customer"),{method:"PUT",mode:"cors",body:JSON.stringify({object:a,id:n,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),newComment:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/customer/new-comment"),{method:"POST",mode:"cors",body:JSON.stringify({id:a,comment:n,byuser:localStorage.getItem("userid")})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),deleteCustomer:function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/customer/delete-customer"),{method:"DELETE",mode:"cors",body:JSON.stringify({id:a,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),deleteComment:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/customer/delete-comment"),{method:"DELETE",mode:"cors",body:JSON.stringify({commentid:a,customerid:n,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),displayCustomer:function(t){var a=e.state.customers.find((function(e){return e._id===t}));if(void 0!==a)return r.a.createElement("div",{className:"customerProfile"},r.a.createElement("h1",{className:"customerTitle linebreak"},"Kundeoplysninger"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Virksomhed"),r.a.createElement("span",null,a.company),r.a.createElement("span",{className:"customerLabel"},"CVR"),r.a.createElement("span",null,a.cvr),r.a.createElement("span",{className:"customerLabel"},"Adresse"),r.a.createElement("span",null,a.address),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson"),r.a.createElement("span",null,a.contactpersonname),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson telefon"),r.a.createElement("span",null," ",r.a.createElement("a",{href:"tel:".concat(a.contactpersonphone)},a.contactpersonphone)),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson email"),r.a.createElement("span",null,r.a.createElement("a",{href:"mailto:".concat(a.contactpersonemail)},a.contactpersonemail)),r.a.createElement("span",{className:"customerLabel"},"Hjemmeside"),r.a.createElement("span",null,r.a.createElement("a",{name:"url",target:"_blank",rel:"noopener noreferrer",href:a.url},a.url))))}}},this.props.children)}}]),a}(n.Component),x=r.a.createContext(),j=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).API_URL="/api",n.Auth=new g("".concat(n.API_URL,"/user/authenticate")),n.state={projects:[],project:{team:[],comments:[]}},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(x.Provider,{value:{state:this.state,getProjects:function(){var t=Object(f.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/project/all-projects"));case 2:return a=t.sent,t.next=5,a.json();case 5:return n=t.sent,e.setState({projects:n}),t.abrupt("return",r.a.createElement(r.a.Fragment,null));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getProject:function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.state.projects.find((function(e){return e._id===a}));case 2:(n=t.sent).comments.reverse(),e.setState({project:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),addProject:function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/project/new-project"),{method:"POST",mode:"cors",body:JSON.stringify({project:a,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),newComment:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/project/new-comment"),{method:"POST",mode:"cors",body:JSON.stringify({id:a,comment:n,byuser:localStorage.getItem("userid")})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),deleteProject:function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/project/delete-project"),{method:"DELETE",mode:"cors",body:JSON.stringify({id:a,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateProject:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/project/edit-project"),{method:"POST",mode:"cors",body:JSON.stringify({object:a,id:n,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),addUserToProject:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/project/add-to-project"),{method:"PUT",mode:"cors",body:JSON.stringify({user:a,byuser:localStorage.getItem("userid"),date:Date.now(),id:n})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),removeFromTeam:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/project/delete-from-team"),{method:"DELETE",mode:"cors",body:JSON.stringify({uid:a,pid:n,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),deleteComment:function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Auth.fetch("".concat(e.API_URL,"/project/delete-comment"),{method:"DELETE",mode:"cors",body:JSON.stringify({commentid:a,customerid:n,byuser:localStorage.getItem("userid"),date:Date.now()})});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},this.props.children)}}]),a}(n.Component),w=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",feedback:"",feedbackStyle:{display:"none"}},n}return Object(o.a)(a,[{key:"handleLogin",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.context.login(this.state.username,this.state.password);case 3:return a=e.sent,this.setState({feedback:a.message,feedbackStyle:{display:"block"}}),e.next=7,this.context.getUsers();case 7:return e.next=9,this.context.getLoggedInUser(localStorage.getItem("username"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{className:"loginForm"},r.a.createElement("div",{style:this.state.feedbackStyle,className:"warningFeedback"},r.a.createElement("span",{className:"material-icons"},"error_outline"),r.a.createElement("span",null,this.state.feedback)),r.a.createElement("span",{className:"label"},"Brugernavn"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},name:"username",type:"text",placeholder:"Brugernavn"}),r.a.createElement("br",null),r.a.createElement("span",{className:"label"},"Adgangskode"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},name:"password",type:"password",placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(t){return e.handleLogin(t)}},"Log ind"))))}}]),a}(n.Component);w.contextType=v;var O=w,I=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showModal:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getUsers();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"newUser",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={fullname:this.state.fullname,username:this.state.username,password:this.state.password,email:this.state.email,phone:this.state.phone,title:this.state.title,date:Date.now(),status:{text:"Ledig",class:"available"},imageurl:this.state.imageurl},e.next=4,this.context.newUser(a);case 4:return this.setState({showModal:!this.state.showModal}),e.next=7,this.context.getUsers();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showModal",value:function(e){["newBtn","modalOverlay"].includes(e.target.classList[0])&&this.setState({showModal:!this.state.showModal})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,e.state.showModal?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modalOverlay",onClick:function(t){return e.showModal(t)}},r.a.createElement("div",{className:"modalContent"},r.a.createElement("h2",{className:"modalTitle"},"Ny medarbejder"),r.a.createElement("form",{onSubmit:function(t){return e.newUser(t)}},r.a.createElement("div",{className:"halfwidth"},r.a.createElement("input",{required:!0,className:"modalInput",type:"text",placeholder:"Brugernavn - Bruges til login",name:"username",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{required:!0,className:"modalInput",type:"text",placeholder:"Adgangskode - Bruges til login",name:"password",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{required:!0,className:"modalInput",type:"text",placeholder:"Medarbejderens fulde navn",name:"fullname",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{required:!0,className:"modalInput",type:"text",placeholder:"Medarbejderens titel",name:"title",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("div",{className:"halfwidth"},r.a.createElement("input",{required:!0,className:"modalInput",type:"text",placeholder:"Medarbejderens email",name:"email",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Medarbejderens telefonnummer",name:"phone",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Link til billede af medarbejder",name:"imageurl",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("button",{className:"modalBtn",type:"submit"},"OPRET MEDARBEJDER")))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("span",{className:"inlineWrapper"},r.a.createElement("h1",null,"Medarbejdere"),r.a.createElement("button",{className:"newBtn",onClick:function(t){return e.showModal(t)}},r.a.createElement("i",{className:"material-icons-outlined"},"person_add"),"OPRET NY MEDARBEJDER")),t.state.users.sort((function(e,t){return e.fullname.localeCompare(t.fullname)})).map((function(e){return r.a.createElement("div",{className:"userContainer"},r.a.createElement("div",{className:"userImg"},r.a.createElement(m.a,{to:"/user/".concat(e.username)},r.a.createElement("img",{src:e.imageurl,alt:"Medarbejderbillede"}))),r.a.createElement("div",{className:"userFullName"},r.a.createElement("p",null,r.a.createElement(m.a,{to:"/user/".concat(e.username)},e.fullname))),r.a.createElement("div",{className:"userTitle"},r.a.createElement("p",null,e.title)),r.a.createElement("div",{className:"userStatus"},r.a.createElement("p",{className:e.status.class},e.status.text)),r.a.createElement("div",{className:"userContactEmail"},r.a.createElement("a",{href:"mailto:".concat(e.email)},r.a.createElement("p",null,e.email))),r.a.createElement("div",{className:"userContactPhone"},r.a.createElement("a",{href:"tel:".concat(e.phone)},r.a.createElement("p",null,e.phone))))})))})))}}]),a}(n.Component);I.contextType=v;var S=I,L=a(10),M=a.n(L),T=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={updatedUser:{}},n}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState({updatedUser:Object(d.a)(Object(d.a)({},this.state.updatedProject),{},Object(y.a)({},e.target.name,e.target.value))})}},{key:"showModal",value:function(e){"modalOverlay".includes(e.target.classList[0])&&this.props.hideModal()}},{key:"updateUser",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.updateFullUser(this.state.updatedUser,this.props.username);case 2:return e.next=4,this.props.update();case 4:this.props.disableEdit();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"customerProfile"},r.a.createElement("span",{className:"editBtn material-icons-outlined highlightExit",onClick:function(){return e.props.disableEdit()}},"close"),r.a.createElement("span",{title:"Gem \xe6ndringer",className:"editBtn material-icons-outlined highlightSave",onClick:function(){return e.updateUser()}},"save"),r.a.createElement("h2",null,"Medarbejderoplysninger"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Fulde navn"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"fullname",defaultValue:t.state.user.fullname}),r.a.createElement("span",{className:"customerLabel"},"Titel"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"title",defaultValue:t.state.user.title}),r.a.createElement("span",{className:"customerLabel"},"Email"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"email",defaultValue:t.state.user.email}),r.a.createElement("span",{className:"customerLabel"},"Telefon"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"phone",defaultValue:t.state.user.phone}),r.a.createElement("span",{className:"customerLabel"},"Billede URL"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"imageurl",defaultValue:t.state.user.imageurl}),r.a.createElement("span",{className:"customerLabel"},"Profil oprettet"),r.a.createElement("span",{name:"date"},M()(t.state.user.date).format("MMM Do YY")))))})))}}]),a}(n.Component);T.contextType=v;var U=T,P=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={style:{display:"none"}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getUsers();case 2:return e.next=4,this.context.getUser(this.props.username);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchNewData",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getUsers();case 2:return e.next=4,this.context.getUser(this.props.username);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editUser",value:function(e){var t=e.currentTarget.getBoundingClientRect();e.preventDefault(),this.setState({oldValue:e.currentTarget.textContent,style:{position:"absolute",left:t.x,top:t.y-5},overlay:{width:"100vw",height:"100vw",top:0,left:0,position:"fixed"},updateValue:{name:e.target.getAttribute("name"),id:this.context.state.user._id,newValue:""}})}},{key:"getDeadline",value:function(e){if(void 0!==e){var t=M()(e).diff(M()(),"days");if(t<0)return r.a.createElement("span",{className:"deadlineLate"},"Overskredet med ",-1*t," dage");if(t>0&&t<10)return r.a.createElement("span",{className:"deadlineSoon"},t," dage til deadline");if(t>10)return r.a.createElement("span",{className:"deadlineLong"},t," dage til deadline")}}},{key:"updateField",value:function(e){this.setState({updateValue:Object(d.a)(Object(d.a)({},this.state.updateValue),{},{newValue:e.target.value})})}},{key:"updateFieldRequest",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.context.updateUser(this.state.updateValue);case 3:return e.next=5,this.context.getUsers();case 5:return e.next=7,this.context.getUser(this.props.username);case 7:this.setState({style:{display:"none"}}),document.getElementById("updateCustomer").value="";case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeEdit",value:function(e){e.target===document.getElementsByClassName("editContainerOverlay")[0]&&this.setState({overlay:{display:"none"}})}},{key:"allowEdit",value:function(){this.setState({allowEdit:!0,editEnabled:{display:"none"}})}},{key:"disableEdit",value:function(){this.setState({allowEdit:!1,editEnabled:{display:"block"}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Profil for: ",t.state.user.fullname),r.a.createElement("div",{className:"profileContainer"},e.state.allowEdit?r.a.createElement(U,{username:e.props.username,disableEdit:function(){return e.disableEdit()},update:function(){return e.fetchNewData()}}):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"customerProfile",style:e.state.editEnabled},r.a.createElement("span",{className:"material-icons-outlined editBtn",onClick:function(t){return e.allowEdit(t)}},"post_add"),r.a.createElement("h2",null,"Medarbejderoplysninger"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Fulde navn"),r.a.createElement("span",{className:"edit",name:"fullname",onContextMenu:function(t){return e.editUser(t)}},t.state.user.fullname),r.a.createElement("span",{className:"customerLabel"},"Titel"),r.a.createElement("span",{className:"edit",name:"title",onContextMenu:function(t){return e.editUser(t)}},t.state.user.title),r.a.createElement("span",{className:"customerLabel"},"Email"),r.a.createElement("span",{className:"edit",name:"email",onContextMenu:function(t){return e.editUser(t)}},t.state.user.email),r.a.createElement("span",{className:"customerLabel"},"Telefon"),r.a.createElement("span",{className:"edit",name:"phone",onContextMenu:function(t){return e.editUser(t)}},t.state.user.phone),r.a.createElement("span",{className:"customerLabel"},"Billede URL"),r.a.createElement("span",{className:"edit",name:"imageurl",onContextMenu:function(t){return e.editUser(t)}},"H\xf8jreklik for at opdatere"),r.a.createElement("span",{className:"customerLabel"},"Profil oprettet"),r.a.createElement("span",{name:"date"},M()(t.state.user.date).format("MMM Do YY")))),r.a.createElement("div",{className:"profileImgContainer"},r.a.createElement("img",{className:"profileImg",alt:"Medarbejderbillede",src:t.state.user.imageurl})),r.a.createElement("div",{className:"userProfile"},r.a.createElement("h2",null,"Projekter"),r.a.createElement(x.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,t.state.projects.map((function(t){return t.team.map((function(a){return a.username===e.props.username?r.a.createElement("div",{className:"profileComment"},r.a.createElement(m.a,{to:"/project/"+t._id},r.a.createElement("span",null,t.projectname)),r.a.createElement("div",null,t.description),r.a.createElement("div",{className:"projectInfo"},r.a.createElement("span",null,e.getDeadline(t.deadline)),t.team.map((function(e){return r.a.createElement("img",{alt:"",className:"projectEmployeeImg",title:e.fullname,src:e.imageurl})})))):r.a.createElement(r.a.Fragment,null)}))})))}))),r.a.createElement("div",{className:"userProfile"},r.a.createElement("h2",null,"Kommentarer"),r.a.createElement(C.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,t.state.customers.map((function(t){return t.comments.map((function(a){return a.username===e.props.username?r.a.createElement("div",{className:"profileComment"},r.a.createElement("div",{className:"profileCommentOn"},r.a.createElement("span",null,e.props.username," "),"skrev en kommentar p\xe5:",r.a.createElement(m.a,{to:"/customer/"+t._id},r.a.createElement("span",null," ",t.company))),r.a.createElement("div",{className:"profileCommentDate"},M()(a.date).fromNow()),r.a.createElement("div",{className:"profileCommentText"},a.comment)):r.a.createElement(r.a.Fragment,null)}))})))})))),r.a.createElement("div",{className:"editContainerOverlay",style:e.state.overlay,onClick:function(t){return e.closeEdit(t)}},r.a.createElement("div",{className:"editContainer",style:e.state.style},r.a.createElement("div",{className:"editContent"},r.a.createElement("form",null,r.a.createElement("input",{id:"updateCustomer",placeholder:e.state.oldValue,type:"text",defaultValue:e.state.edit,onChange:function(t){return e.updateField(t)}}),r.a.createElement("button",{type:"submit",onClick:function(t){return e.updateFieldRequest(t)}},"Gem"))))))})))}}]),a}(n.Component);P.contextType=v;var _=P,D=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showModal:!1,counter:0,steps:{first:!0,second:!1,third:!1,fourth:!1},warning:{display:"none"}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.context.getCustomers();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showModal",value:function(e){["newBtn","modalOverlay"].includes(e.target.classList[0])&&this.setState({showModal:!this.state.showModal})}},{key:"nextStep",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3!==this.state.counter){e.next=9;break}return t={company:this.state.name,address:this.state.address,cvr:this.state.cvr,url:this.state.url,description:this.state.description,contactpersonname:this.state.contactpersonname,contactpersonphone:this.state.contactpersonphone,contactpersonemail:this.state.contactpersonemail,facebook:this.state.facebook,instagram:this.state.instagram,linkedin:this.state.linkedin,pinterest:this.state.pinterest,hours:this.state.hours,hourprice:this.state.hourprice,paymentoptions:this.state.paymentoptions},this.setState({showModal:!this.state.showModal}),e.next=5,this.context.newCustomer(t);case 5:return e.next=7,this.context.getCustomers();case 7:e.next=11;break;case 9:n=["first","second","third","fourth"],this.setState({steps:Object(d.a)(Object(d.a)({},this.state.steps),{},(a={},Object(y.a)(a,n[this.state.counter],!1),Object(y.a)(a,n[this.state.counter+1],!0),a)),counter:this.state.counter+1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showWarning",value:function(e,t){var a=e.target.getBoundingClientRect();this.setState({warning:{left:a.x+40,top:a.y-40},deleteCustomer:t})}},{key:"closeWarning",value:function(){this.setState({warning:{display:"none"}})}},{key:"deleteCustomer",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({warning:{display:"none"}}),e.next=3,this.context.deleteCustomer(t);case 3:return e.next=5,this.context.getCustomers();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"warningBox",style:e.state.warning},r.a.createElement("span",{className:"warningPointer"}),r.a.createElement("p",null,"Du er ved at slette en kunde. Er du sikker?"),r.a.createElement("span",{className:"closeWarning",onClick:function(){return e.closeWarning()}},"x"),r.a.createElement("button",{onClick:function(){return e.deleteCustomer(e.state.deleteCustomer)}},"Slet kunde")),r.a.createElement("span",{className:"inlineWrapper"},r.a.createElement("h1",null,"Kundeoversigt"),r.a.createElement("button",{className:"newBtn",onClick:function(t){return e.showModal(t)}},r.a.createElement("i",{className:"material-icons-outlined"},"person_add"),"OPRET NY KUNDE")),e.state.showModal?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modalOverlay",onClick:function(t){return e.showModal(t)}},r.a.createElement("div",{className:"modalContent"},r.a.createElement("h2",{className:"modalTitle"},"Ny kunde"),r.a.createElement("div",{className:e.state.steps.first?"":"step"},r.a.createElement("p",null,"Opret en ny kunde"),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Virksomhedens navn",name:"name",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Virksomhedens adresse",name:"address",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"CVR nummer",name:"cvr",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Kundens hjemmeside",name:"url",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("textarea",{className:"modalInput modalTextArea",type:"text",placeholder:"Kort beskrivelse af kunden",name:"description",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:e.state.steps.second?"":"step"},r.a.createElement("p",null,"Hvem er kontaktpersonen i virksomheden?"),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Navn p\xe5 kontaktperson",name:"contactpersonname",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Telefonnummer",name:"contactpersonphone",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Email",name:"contactpersonemail",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:e.state.steps.third?"":"step"},r.a.createElement("p",null,"Kundens sociale medier"),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Facebook",name:"facebook",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Instagram",name:"instagram",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"LinkedIn",name:"linkedin",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Pinterest",name:"pinterest",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:e.state.steps.fourth?"":"step"},r.a.createElement("p",null,"Betaling & abonnement"),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Antal timer i m\xe5neden",name:"hours",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Timepris",name:"hourprice",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("textarea",{className:"modalInput modalTextArea",type:"text",placeholder:"Betalingsbetingelser",name:"paymentoptions",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("button",{className:"modalBtn",onClick:function(){return e.nextStep()}},"N\xc6STE ",r.a.createElement("i",{class:"material-icons"},"keyboard_arrow_right")))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"customerGrid"},t.state.customers.map((function(t){return r.a.createElement("div",{className:"customerContainer"},r.a.createElement("div",{className:"customerName"},r.a.createElement(m.a,{to:"/customer/".concat(t._id)},r.a.createElement("h3",{className:"customerTitle"},t.company)),r.a.createElement("span",{onClick:function(a){return e.showWarning(a,t._id)},className:"deleteCustomer"},"x")),r.a.createElement("div",{className:"customerUrl"},r.a.createElement("a",{href:t.url},t.url)),r.a.createElement("div",{className:"customerDesc"},t.description))}))))})))}}]),a}(n.Component);D.contextType=C;var F=D,A=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={updatedCustomer:{}},n}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState({updatedCustomer:Object(d.a)(Object(d.a)({},this.state.updatedCustomer),{},Object(y.a)({},e.target.name,e.target.value))})}},{key:"showModal",value:function(e){"modalOverlay".includes(e.target.classList[0])&&this.props.hideModal()}},{key:"updateCustomer",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.updateFullCustomer(this.state.updatedCustomer,this.props.id);case 2:return e.next=4,this.props.update();case 4:this.props.disableEdit();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"gridContainer"},r.a.createElement("div",{className:"customerProfile"},r.a.createElement("h1",{className:"customerTitle"},t.state.customer.company),r.a.createElement("span",{className:"editBtn material-icons-outlined highlightExit",onClick:function(){return e.props.disableEdit()}},"close"),r.a.createElement("span",{title:"Gem \xe6ndringer",className:"editBtn material-icons-outlined highlightSave",onClick:function(){return e.updateCustomer()}},"save"),r.a.createElement("h3",null,r.a.createElement("span",{className:"material-icons-outlined"},"subject")," Kundeoplysninger"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Virksomhed"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"company",defaultValue:t.state.customer.company}),r.a.createElement("span",{className:"customerLabel"},"CVR"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"cvr",defaultValue:t.state.customer.cvr}),r.a.createElement("span",{className:"customerLabel"},"Adresse"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"address",defaultValue:t.state.customer.address}),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"contactpersonname",defaultValue:t.state.customer.contactpersonname}),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson telefon"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"contactpersonphone",defaultValue:t.state.customer.contactpersonphone}),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson email"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"contactpersonemail",defaultValue:t.state.customer.contactpersonemail}),r.a.createElement("span",{className:"customerLabel"},"Hjemmeside"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"url",defaultValue:t.state.customer.url}))),r.a.createElement("div",{className:"customerSub"},r.a.createElement("div",null,r.a.createElement("h2",null,"Abonnement & priser"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Antal timer"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"hours",defaultValue:t.state.customer.hours}),r.a.createElement("span",{className:"customerLabel"},"Timepris"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"hourprice",defaultValue:t.state.customer.hourprice}),r.a.createElement("span",{className:"customerLabel"},"Oms\xe6tning i alt"),r.a.createElement("span",null,t.state.customer.hourprice*t.state.customer.hours," kr/m\xe5neden"))),r.a.createElement("div",null,r.a.createElement("h2",null,"Sociale medier"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Facebook"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"facebook",defaultValue:t.state.customer.facebook}),r.a.createElement("span",{className:"customerLabel"},"Instagram"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"instagram",defaultValue:t.state.customer.instagram}),r.a.createElement("span",{className:"customerLabel"},"LinkedIn"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"linkedin",defaultValue:t.state.customer.linkedin}),r.a.createElement("span",{className:"customerLabel"},"Pinterest"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"editInput",name:"pinterest",defaultValue:t.state.customer.pinterest}))))))})))}}]),a}(n.Component);A.contextType=C;var B=A,R=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={comment:null,style:{display:"none"},tooltip:{display:"none"}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getCustomers();case 2:return e.next=4,this.context.getCustomer(this.props.id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchNewData",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getCustomers();case 2:return e.next=4,this.context.getCustomer(this.props.id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"newComment",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.state.comment){e.next=9;break}return a={comment:this.state.comment,username:t.username,fullname:t.fullname,date:Date.now(),imageurl:t.imageurl},e.next=4,this.context.newComment(this.context.state.customer._id,a);case 4:return document.querySelector(".commentInput").value="",e.next=7,this.context.getCustomers();case 7:return e.next=9,this.context.getCustomer(this.props.id);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editCustomer",value:function(e){var t=e.currentTarget.getBoundingClientRect();e.preventDefault(),this.setState({oldValue:e.currentTarget.textContent,style:{position:"absolute",left:t.x,top:t.y-5},overlay:{width:"100vw",height:"100vw",top:0,left:0,position:"fixed"},updateValue:{name:e.target.getAttribute("name"),id:this.context.state.customer._id,newValue:""}})}},{key:"updateField",value:function(e){this.setState({updateValue:Object(d.a)(Object(d.a)({},this.state.updateValue),{},{newValue:e.target.value})})}},{key:"updateFieldRequest",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.context.updateCustomer(this.state.updateValue);case 3:return e.next=5,this.context.getCustomers();case 5:return e.next=7,this.context.getCustomer(this.props.id);case 7:this.setState({style:{display:"none"}}),document.getElementById("updateCustomer").value="";case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeEdit",value:function(e){e.target===document.getElementsByClassName("editContainerOverlay")[0]&&this.setState({overlay:{display:"none"}})}},{key:"deleteComment",value:function(){var e=Object(f.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.deleteComment(t,a);case 2:return e.next=4,this.context.getCustomers();case 4:return e.next=6,this.context.getCustomer(this.props.id);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"allowEdit",value:function(){this.setState({allowEdit:!0,editEnabled:{display:"none"}})}},{key:"disableEdit",value:function(){this.setState({allowEdit:!1,editEnabled:{display:"grid"}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tooltip",style:e.state.tooltip},r.a.createElement("span",{className:"tooltipPointer"}),r.a.createElement("p",null,"H\xf8jreklik p\xe5 et felt for at opdatere det. Klik p\xe5 ikonet for at se hvilke felter der kan redigeres."),r.a.createElement("span",{className:"closeTooltip",onClick:function(){return e.closeTooltip()}},"x")),r.a.createElement("div",{className:"editContainerOverlay",style:e.state.overlay,onClick:function(t){return e.closeEdit(t)}},r.a.createElement("div",{className:"editContainer",style:e.state.style},r.a.createElement("div",{className:"editContent"},r.a.createElement("form",null,r.a.createElement("input",{id:"updateCustomer",placeholder:e.state.oldValue,type:"text",defaultValue:e.state.edit,onChange:function(t){return e.updateField(t)}}),r.a.createElement("button",{type:"submit",onClick:function(t){return e.updateFieldRequest(t)}},"Gem"))))),e.state.allowEdit?r.a.createElement(B,{id:e.props.id,disableEdit:function(){return e.disableEdit()},update:function(){return e.fetchNewData()}}):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"gridContainer",style:e.state.editEnabled},r.a.createElement("div",{className:"customerProfile"},r.a.createElement("h1",{className:"customerTitle"},t.state.customer.company),r.a.createElement("span",{className:"editBtn material-icons-outlined",onClick:function(t){return e.allowEdit(t)}},"post_add"),r.a.createElement("div",{className:"customerUrl"},r.a.createElement("span",{className:"material-icons-outlined customerLink"},"exit_to_app"),r.a.createElement("a",{href:t.state.customer.url}," ",t.state.customer.url)),r.a.createElement("h3",null,r.a.createElement("span",{className:"material-icons-outlined"},"subject")," Kundeoplysninger"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Virksomhed"),r.a.createElement("span",{className:"edit",name:"company",onContextMenu:function(t){return e.editCustomer(t)}},t.state.customer.company),r.a.createElement("span",{className:"customerLabel"},"CVR"),r.a.createElement("span",{className:"edit",name:"cvr",onContextMenu:function(t){return e.editCustomer(t)}},t.state.customer.cvr),r.a.createElement("span",{className:"customerLabel"},"Adresse"),r.a.createElement("span",{className:"edit",name:"address",onContextMenu:function(t){return e.editCustomer(t)}},t.state.customer.address),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson"),r.a.createElement("span",{className:"edit",name:"contactpersonname",onContextMenu:function(t){return e.editCustomer(t)}},t.state.customer.contactpersonname),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson telefon"),r.a.createElement("span",{className:"edit"},r.a.createElement("a",{name:"contactpersonphone",onContextMenu:function(t){return e.editCustomer(t)},href:"tel:".concat(t.state.customer.contactpersonphone)},t.state.customer.contactpersonphone)),r.a.createElement("span",{className:"customerLabel"},"Kontaktperson email"),r.a.createElement("span",{className:"edit"},r.a.createElement("a",{name:"contactpersonemail",onContextMenu:function(t){return e.editCustomer(t)},href:"mailto:".concat(t.state.customer.contactpersonemail)},t.state.customer.contactpersonemail)),r.a.createElement("span",{className:"customerLabel"},"Hjemmeside"),r.a.createElement("span",{className:"edit"},r.a.createElement("a",{name:"url",onContextMenu:function(t){return e.editCustomer(t)},target:"_blank",rel:"noopener noreferrer",href:t.state.customer.url},t.state.customer.url)))),r.a.createElement("div",{className:"customerSub"},r.a.createElement("div",null,r.a.createElement("h2",null,"Abonnement & priser"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Antal timer"),r.a.createElement("span",{className:"edit",name:"hours",onContextMenu:function(t){return e.editCustomer(t)}},t.state.customer.hours),r.a.createElement("span",{className:"customerLabel"},"Timepris"),r.a.createElement("span",{className:"edit",name:"hourprice",onContextMenu:function(t){return e.editCustomer(t)}},t.state.customer.hourprice),r.a.createElement("span",{className:"customerLabel"},"Oms\xe6tning i alt"),r.a.createElement("span",null,t.state.customer.hourprice*t.state.customer.hours," kr/m\xe5neden"))),r.a.createElement("div",null,r.a.createElement("h2",null,"Sociale medier"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Facebook"),r.a.createElement("span",{className:"edit"},r.a.createElement("a",{name:"facebook",onContextMenu:function(t){return e.editCustomer(t)},target:"_blank",rel:"noopener noreferrer",href:t.state.customer.facebook},t.state.customer.facebook)),r.a.createElement("span",{className:"customerLabel"},"Instagram"),r.a.createElement("span",{className:"edit"},r.a.createElement("a",{name:"instagram",onContextMenu:function(t){return e.editCustomer(t)},target:"_blank",rel:"noopener noreferrer",href:t.state.customer.instagram},t.state.customer.instagram)),r.a.createElement("span",{className:"customerLabel"},"LinkedIn"),r.a.createElement("span",{className:"edit"},r.a.createElement("a",{name:"linkedin",onContextMenu:function(t){return e.editCustomer(t)},target:"_blank",rel:"noopener noreferrer",href:t.state.customer.linkedin},t.state.customer.linkedin)),r.a.createElement("span",{className:"customerLabel"},"Pinterest"),r.a.createElement("span",{className:"edit"},r.a.createElement("a",{name:"pinterest",onContextMenu:function(t){return e.editCustomer(t)},target:"_blank",rel:"noopener noreferrer",href:t.state.customer.pinterest},t.state.customer.pinterest)))))),r.a.createElement(v.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,"  ",r.a.createElement("h2",null,"Tilf\xf8j kommentar"),r.a.createElement("div",{className:"newComment clearfix"},r.a.createElement("img",{alt:"Medarbejderbillede",src:t.state.loggedInUser.imageurl,className:"newCommentImg"}),r.a.createElement("textarea",{className:"commentInput",type:"text",placeholder:"Skriv en kommentar",name:"comment",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("button",{className:"commentBtn",onClick:function(){return e.newComment(t.state.loggedInUser)}},"Tilf\xf8j kommentar")))})),r.a.createElement("div",{className:"allComments"},r.a.createElement("h2",null,"Kommentarer"),t.state.customer.comments.map((function(a){return r.a.createElement("div",{className:"commentContainer"},r.a.createElement("div",{className:"commentAuthor"},r.a.createElement("span",{style:{float:"right",cursor:"pointer"},onClick:function(){return e.deleteComment(a._id,t.state.customer._id)}},"x"),r.a.createElement("div",{className:"commentImg"},r.a.createElement("img",{alt:"Medarbejderbillede",src:a.imageurl})),r.a.createElement("span",{className:"commentName"},a.fullname),r.a.createElement("span",{className:"commentDate"},M()(a.date).fromNow()),r.a.createElement("div",{className:"commentContent"},a.comment)))}))))})))}}]),a}(n.Component);R.contextType=C;var V=R,K=a(19),J=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getUsers();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=this;this.setState(Object(y.a)({style:{display:"block"}},e.target.name,e.target.value),(function(){var e=t.context.state.users.filter((function(e){return e.fullname.includes(t.state.user)&&t.props.team.map((function(e){return e._id})).indexOf(e._id)<0}));t.setState({users:e})}))}},{key:"hideSuggestions",value:function(){this.setState({style:{display:"none"}})}},{key:"render",value:function(){var e=this,t=this.state.users.map((function(t){return r.a.createElement("div",{className:"suggestion",style:e.state.style,onClick:function(){e.props.updateTeam(t),e.hideSuggestions()}},r.a.createElement("img",{className:"suggestionImg",alt:"",src:t.imageurl}),r.a.createElement("span",{className:"suggestionName"},t.fullname),r.a.createElement("span",{className:"suggestionTitle"}," - ",t.title))})),a=this.props.team.map((function(t){return r.a.createElement("img",{alt:"",className:"selectedImg",src:t.imageurl,onClick:function(){e.props.removeFromTeam(t._id)}})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"inputContainer"},r.a.createElement("input",{autoComplete:"off",className:"suggestionInput",type:"text",placeholder:"Ansvarlige for projektet",name:"user",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("span",{className:"selectedTeam"},a)),r.a.createElement("div",{className:"suggestionContainer"},t))}}]),a}(n.Component);J.contextType=v;var W=J,q=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={customer:{},style:{display:"none"}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getCustomers();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=this;this.setState(Object(y.a)({style:{display:"block"}},e.target.name,e.target.value),(function(){var e=t.context.state.customers.find((function(e){return e.company.includes(t.state.company)}));e?t.setState({customer:e}):t.setState({customer:{company:"Ingen resultater"}})}))}},{key:"hideSuggestions",value:function(e,t){this.props.addCustomer(t);var a=e.currentTarget.querySelector("span").innerHTML;document.getElementById("company").value=a,this.setState({style:{display:"none"}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"inputContainer"},r.a.createElement("input",{id:"company",autoComplete:"off",className:"suggestionInput",type:"text",placeholder:"Kundens navn",name:"company",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"suggestionContainer"},r.a.createElement("div",{className:"suggestion",style:this.state.style,onClick:function(t){e.hideSuggestions(t,e.state.customer._id)}},r.a.createElement("span",{className:"suggestionName"},this.state.customer.company))))}}]),a}(n.Component);q.contextType=C;var G=q,H=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showModal:!1,team:[],warning:{display:"none"},feedback:{display:"none"}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getProjects();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDeadline",value:function(e){if(void 0!==e){var t=M()(e).diff(M()(),"days");if(t<0)return r.a.createElement("span",{className:"deadlineLate"},"Overskredet med ",-1*t," dage");if(t>0&&t<10)return r.a.createElement("span",{className:"deadlineSoon"},t," dage til deadline");if(t>10)return r.a.createElement("span",{className:"deadlineLong"},t," dage til deadline")}}},{key:"updateTeam",value:function(e){this.setState({team:[].concat(Object(K.a)(this.state.team),[e])})}},{key:"addCustomer",value:function(e){this.setState({customer:e})}},{key:"removeFromTeam",value:function(e){var t=this.state.team.filter((function(t){return t._id!==e}));this.setState({team:t})}},{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"createProject",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.state.customer){e.next=9;break}return t={company:this.state.customer,description:this.state.description,deadline:this.state.deadline,team:this.state.team,date:Date.now(),projectname:this.state.projectname},e.next=4,this.context.addProject(t);case 4:return this.setState({showModal:!this.state.showModal}),e.next=7,this.context.getProjects();case 7:e.next=10;break;case 9:this.setState({feedback:{display:"block"}});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showModal",value:function(e){["newBtn","modalOverlay"].includes(e.target.classList[0])&&this.setState({showModal:!this.state.showModal})}},{key:"showWarning",value:function(e,t){var a=e.target.getBoundingClientRect();this.setState({warning:{left:a.x+40,top:a.y-40},deleteProject:t})}},{key:"closeWarning",value:function(){this.setState({warning:{display:"none"}})}},{key:"deleteProject",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({warning:{display:"none"}}),e.next=3,this.context.deleteProject(t);case 3:return e.next=5,this.context.getProjects();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"inlineWrapper"},r.a.createElement("h1",null,"Projektoversigt"),r.a.createElement("button",{className:"newBtn",onClick:function(t){return e.showModal(t)}},r.a.createElement("i",{className:"material-icons-outlined"},"content_copy"),"OPRET NYT PROJEKT")),r.a.createElement(x.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"warningBox",style:e.state.warning},r.a.createElement("span",{className:"warningPointer"}),r.a.createElement("p",null,"Du er ved at slette et projekt. Er du sikker?"),r.a.createElement("span",{className:"closeWarning",onClick:function(){return e.closeWarning()}},"x"),r.a.createElement("button",{onClick:function(){return e.deleteProject(e.state.deleteProject)}},"Slet projekt")),e.state.showModal?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modalOverlay",onClick:function(t){return e.showModal(t)}},r.a.createElement("div",{className:"modalContent"},r.a.createElement("h2",{className:"modalTitle"},"Nyt projekt"),r.a.createElement("div",{style:e.state.feedback,className:"warningFeedback"},r.a.createElement("span",{className:"material-icons"},"error_outline"),r.a.createElement("span",null,"V\xe6lg en kunde fra listen.")),r.a.createElement("div",null,r.a.createElement(G,{addCustomer:function(t){return e.addCustomer(t)}}),r.a.createElement("input",{className:"modalInput",type:"text",placeholder:"Navngiv projektet",name:"projectname",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"modalInput",type:"date",placeholder:"Deadline",name:"deadline",onChange:function(t){return e.handleChange(t)}}),r.a.createElement(W,{updateTeam:function(t){return e.updateTeam(t)},removeFromTeam:function(t){return e.removeFromTeam(t)},team:e.state.team}),r.a.createElement("textarea",{className:"modalInput modalTextArea",type:"text",placeholder:"Beskriv projektet",name:"description",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("button",{className:"modalBtn",onClick:function(){return e.createProject()}},"OPRET ",r.a.createElement("i",{className:"material-icons"},"library_add_check")))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"customerGrid"},t.state.projects.map((function(t){return r.a.createElement("div",{className:"customerContainer"},r.a.createElement("div",{className:"customerName"},r.a.createElement(m.a,{to:"/project/".concat(t._id)},r.a.createElement("h3",{className:"customerTitle"},t.projectname)),r.a.createElement("span",{onClick:function(a){return e.showWarning(a,t._id)},className:"deleteCustomer"},"x")),r.a.createElement("div",{className:"customerDesc"},t.description),r.a.createElement("div",{className:"projectInfo"},r.a.createElement("span",null,e.getDeadline(t.deadline))," ",t.team.map((function(e){return r.a.createElement("img",{alt:"",className:"projectEmployeeImg",title:e.fullname,src:e.imageurl})}))))}))))})))}}]),a}(n.Component);H.contextType=x;var Y=H,z=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={updatedProject:{projectname:n.props.projectname,description:n.props.description,deadline:n.props.deadline,status:n.props.status}},n}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState({updatedProject:Object(d.a)(Object(d.a)({},this.state.updatedProject),{},Object(y.a)({},e.target.name,e.target.value))})}},{key:"showModal",value:function(e){"modalOverlay".includes(e.target.classList[0])&&this.props.hideModal()}},{key:"updateProject",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.updateProject(this.state.updatedProject,this.props.id);case 2:return e.next=4,this.props.update();case 4:this.props.disableEdit();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"customerProfile",style:e.state.editEnabled},r.a.createElement("h1",{className:"customerTitle linebreak"},"Projektoplysninger"),r.a.createElement("span",{className:"editBtn material-icons-outlined highlightExit",onClick:function(){return e.props.disableEdit()}},"close"),r.a.createElement("span",{title:"Gem \xe6ndringer",className:"editBtn material-icons-outlined highlightSave",onClick:function(){return e.updateProject()}},"save"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Projektnavn"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},className:"modalInput",name:"projectname",defaultValue:t.state.project.projectname}),r.a.createElement("span",{className:"customerLabel"},"Beskrivelse"),r.a.createElement("textarea",{onChange:function(t){return e.handleChange(t)},className:"edit modalInput modalTextArea",name:"description",defaultValue:t.state.project.description}),r.a.createElement("span",{className:"customerLabel"},"Deadline"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},type:"date",className:"modalInput",name:"deadline",defaultValue:t.state.project.deadline}),r.a.createElement("span",{className:"customerLabel"},"Status"),r.a.createElement("select",{onChange:function(t){return e.handleChange(t)},name:"status",className:"modalSelect"},r.a.createElement("option",null,"Fuldf\xf8rt"),r.a.createElement("option",null,"Afventer"),r.a.createElement("option",null,"Igangv\xe6rende")))))})))}}]),a}(n.Component);z.contextType=x;var Q=z,X=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={team:[],teamList:{display:"none"},classes:"selectMemberContainer",style:{display:"none"}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getProjects();case 2:return e.next=4,this.context.getProject(this.props.id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchNewData",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getProjects();case 2:return e.next=4,this.context.getProject(this.props.id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDeadline",value:function(e){if(void 0!==e){var t=M()(e).diff(M()(),"days");if(t<0)return r.a.createElement("span",{className:"deadlineLate"},"Overskredet med ",-1*t," dage");if(t>0&&t<10)return r.a.createElement("span",{className:"deadlineSoon"},t," dage til deadline");if(t>10)return r.a.createElement("span",{className:"deadlineLong"},t," dage til deadline")}}},{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"newComment",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.state.comment){e.next=7;break}return a={comment:this.state.comment,username:t.username,fullname:t.fullname,date:Date.now(),imageurl:t.imageurl},e.next=4,this.context.newComment(this.context.state.project._id,a);case 4:return document.querySelector(".commentInput").value="",e.next=7,this.fetchNewData();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteComment",value:function(){var e=Object(f.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.deleteComment(t,a);case 2:return e.next=4,this.fetchNewData();case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"displayUsers",value:function(){this.setState({addToTeam:{display:"none"},classes:"teamOverflow animate__animated animate__slideInDown"})}},{key:"addToTeam",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.addUserToProject(t,this.props.id);case 2:return e.next=4,this.fetchNewData();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeFromTeam",value:function(){var e=Object(f.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.removeFromTeam(t,a);case 2:return e.next=4,this.fetchNewData();case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"allowEdit",value:function(){this.setState({allowEdit:!0,editEnabled:{display:"none"}})}},{key:"disableEdit",value:function(){this.setState({allowEdit:!1,editEnabled:{display:"block"}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"gridContainer"},e.state.allowEdit?r.a.createElement(Q,{id:e.props.id,projectname:t.state.project.projectname,description:t.state.project.description,status:t.state.project.status,deadline:t.state.project.deadline,disableEdit:function(){return e.disableEdit()},update:function(){return e.fetchNewData()}}):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"customerProfile",style:e.state.editEnabled},r.a.createElement("h1",{className:"customerTitle linebreak"},"Projektoplysninger"),r.a.createElement("span",{className:"editBtn material-icons-outlined",onClick:function(t){return e.allowEdit(t)}},"post_add"),r.a.createElement("div",{className:"customerDetails"},r.a.createElement("span",{className:"customerLabel"},"Projektnavn"),r.a.createElement("span",{className:"edit",name:"projectname"},t.state.project.projectname),r.a.createElement("span",{className:"customerLabel"},"Beskrivelse"),r.a.createElement("span",{className:"edit linebreak",name:"projectname"},t.state.project.description),r.a.createElement("span",{className:"customerLabel"},"Deadline"),r.a.createElement("span",{className:"edit",name:"projectname"},t.state.project.deadline),r.a.createElement("span",{className:"customerLabel"},"Dage til deadline"),r.a.createElement("span",{name:"projectname"},e.getDeadline(t.state.project.deadline)),r.a.createElement("span",{className:"customerLabel"},"Status"),r.a.createElement("span",{className:"edit",name:"projectname"},t.state.project.status))),r.a.createElement(C.Consumer,null,(function(e){return r.a.createElement(r.a.Fragment,null,e.displayCustomer(t.state.project.company))}))),r.a.createElement(v.Consumer,null,(function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Team"),r.a.createElement("div",{className:"teamContainer"},r.a.createElement("div",{className:"teamMember"},r.a.createElement("div",{onClick:function(){return e.displayUsers()},style:e.state.addToTeam},r.a.createElement("div",{className:"addMember"},r.a.createElement("span",{className:"material-icons"},"person_add_alt_1")),r.a.createElement("div",{className:"teamMemberName"},"Tilf\xf8j medarbejder")),r.a.createElement("div",{className:e.state.classes},a.state.users.sort((function(e,t){return e.fullname.localeCompare(t.fullname)})).map((function(t){return r.a.createElement("div",{className:"selectTeamMember",onClick:function(){return e.addToTeam(t)}},r.a.createElement("img",{className:"selectTeamMemberImg",alt:"Medarbejderbillede",src:t.imageurl}),r.a.createElement("span",{className:"selectTeamMemberName"},t.fullname))})))),t.state.project.team.map((function(a){return r.a.createElement("div",{className:"teamMember"},r.a.createElement("span",{style:{float:"right",cursor:"pointer"},onClick:function(){return e.removeFromTeam(a._id,t.state.project._id)}},"x"),r.a.createElement("div",{className:"teamMemberImgContainer"},r.a.createElement("img",{className:"teamMemberImg",src:a.imageurl,alt:"Medarbejderbillede"})),r.a.createElement("div",{className:"teamMemberName"},r.a.createElement(m.a,{to:"/user/"+a.username},a.fullname)),r.a.createElement("div",{className:"teamMemberTitle"},a.title))}))))})),r.a.createElement(v.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,"  ",r.a.createElement("h2",null,"Tilf\xf8j kommentar"),r.a.createElement("div",{className:"newComment clearfix"},r.a.createElement("img",{alt:"Medarbejderbillede",src:t.state.loggedInUser.imageurl,className:"newCommentImg"}),r.a.createElement("textarea",{className:"commentInput",type:"text",placeholder:"Skriv en kommentar",name:"comment",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("button",{className:"commentBtn",onClick:function(){return e.newComment(t.state.loggedInUser)}},"Tilf\xf8j kommentar")))})),r.a.createElement("div",{className:"allComments"},r.a.createElement("h2",null,"Kommentarer"),t.state.project.comments.map((function(a){return r.a.createElement("div",{className:"commentContainer"},r.a.createElement("div",{className:"commentAuthor"},r.a.createElement("span",{style:{float:"right",cursor:"pointer"},onClick:function(){return e.deleteComment(a._id,t.state.project._id)}},"x"),r.a.createElement("div",{className:"commentImg"},r.a.createElement("img",{alt:"Medarbejderbillede",src:a.imageurl})),r.a.createElement("span",{className:"commentName"},a.fullname),r.a.createElement("span",{className:"commentDate"},M()(a.date).fromNow()),r.a.createElement("div",{className:"commentContent"},a.comment)))}))))})))}}]),a}(n.Component);X.contextType=x;var Z=X,$=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getProjects();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),a}(n.Component);$.contextType=x;var ee=$,te=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getCustomers();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),a}(n.Component);te.contextType=C;var ae=te,ne=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showStatusMenu:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getUsers();case 2:return e.next=4,this.context.getLoggedInUser(localStorage.getItem("username"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showStatusMenu",value:function(){this.setState({showStatusMenu:!this.state.showStatusMenu})}},{key:"updateUserStatus",value:function(){var e=Object(f.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.updateUserStatus(t,a);case 2:return e.next=4,this.context.getUsers();case 4:return e.next=6,this.context.getLoggedInUser(localStorage.getItem("username"));case 6:this.showStatusMenu();case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,t.state.isLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"topBar"},r.a.createElement("div",{className:"topBarUserContainer"},r.a.createElement("div",{className:"topBarUser"},r.a.createElement("span",{className:"topBarUsername"},t.state.loggedInUser.fullname),r.a.createElement("span",{className:"topBarWrapper"},r.a.createElement("img",{className:"topBarImg",src:t.state.loggedInUser.imageurl,alt:"Medarbejderbillede",onClick:function(){return e.showStatusMenu()}}),r.a.createElement("div",{className:"topBarStatus",id:t.state.loggedInUser.status.class,onClick:function(){return e.showStatusMenu()}}),e.state.showStatusMenu?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"topBarStatusMenu"},r.a.createElement("li",{onClick:function(){return e.updateUserStatus("Ledig","available")}},"Ledig ",r.a.createElement("span",{id:"available"})),r.a.createElement("li",{onClick:function(){return e.updateUserStatus("I et m\xf8de","meeting")}},"I et m\xf8de ",r.a.createElement("span",{id:"meeting"})),r.a.createElement("li",{onClick:function(){return e.updateUserStatus("Arbejder hjemmefra","wfh")}},"Arbejder hjemmefra ",r.a.createElement("span",{id:"wfh"})),r.a.createElement("li",{onClick:function(){return e.updateUserStatus("Syg","sick")}},"Syg",r.a.createElement("span",{id:"sick"})),r.a.createElement("li",{onClick:function(){return e.updateUserStatus("Ude af kontoret","oof")}},"Ude af kontoret",r.a.createElement("span",{id:"oof"})),r.a.createElement("li",{onClick:function(){return t.logOut()}},"Log ud"))):r.a.createElement(r.a.Fragment,null)))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"topBar"},r.a.createElement("div",{className:"topBarUserContainer"},r.a.createElement("div",{className:"topBarUser"},r.a.createElement(m.a,{to:"/"},"Log ind"))))))})))}}]),a}(n.Component);ne.contextType=v;var re=ne,se=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getUsers();case 2:return e.next=4,this.context.getUpdates();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findUser",value:function(e){return this.context.state.users.find((function(t){return t._id===e})).fullname}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Opdateringer"),r.a.createElement(v.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,t.state.updates.map((function(t){return r.a.createElement("div",{className:"news"},r.a.createElement("span",null,e.findUser(t.byuser)),r.a.createElement("span",null," ",t.text),r.a.createElement("span",null,t.about),r.a.createElement("span",{className:"newsDate"},M()(parseInt(t.date)).fromNow()))})))})))}}]),a}(n.Component);se.contextType=v;var ce=se,le=(a(37),function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).API_URL="/api",n.Auth=new g("".concat(n.API_URL,"/user/authenticate")),n}return Object(o.a)(a,[{key:"activeMenu",value:function(e){document.getElementsByClassName("active")[0].classList.remove("active"),e.currentTarget.classList.add("active")}},{key:"render",value:function(){var e=this,t=localStorage.getItem("username");return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",null,r.a.createElement(m.a,{to:"/"},r.a.createElement("li",{onClick:function(t){return e.activeMenu(t)},className:"active"},r.a.createElement("i",{className:"material-icons-outlined"},"store"),"Forside")),r.a.createElement(m.a,{to:"/users"},r.a.createElement("li",{onClick:function(t){return e.activeMenu(t)}},r.a.createElement("i",{className:"material-icons-outlined"},"face"),"Medarbejdere")),r.a.createElement(m.a,{to:"/customers"},r.a.createElement("li",{onClick:function(t){return e.activeMenu(t)}},r.a.createElement("i",{className:"material-icons-outlined"},"local_mall"),"Kunder")),r.a.createElement(m.a,{to:"/projects"},r.a.createElement("li",{onClick:function(t){return e.activeMenu(t)}},r.a.createElement("i",{className:"material-icons-outlined"},"content_copy"),"Projekter")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",null,r.a.createElement("li",null,r.a.createElement(m.a,{to:"/"},"Log ind")))),r.a.createElement(k,null,r.a.createElement(j,null,r.a.createElement(b,null,r.a.createElement(re,null),r.a.createElement(ee,null),r.a.createElement(ae,null),r.a.createElement("div",{className:"container"},r.a.createElement(m.b,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{path:"/users"}),r.a.createElement(_,{path:"/user/:username"}),r.a.createElement(V,{path:"/customer/:id"}),r.a.createElement(F,{path:"/customers"}),r.a.createElement(Y,{path:"/projects"}),r.a.createElement(Z,{path:"/project/:id"}),r.a.createElement(ce,{path:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{path:"/",login:function(t,a){return e.login(t,a)}}))))))))}}]),a}(n.Component));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.79814a4b.chunk.js.map